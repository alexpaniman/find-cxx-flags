# Find CXX Flags

This is a simple CLI tool that takes one source file, finds corresponding to it compilation database and outputs found compilation flags, that can be used in scripts later.

Clang's compilation database is a big list of all compilation invokations with listed parameters that are used to build your project.

It's generated by many build systems (e.g. CMake with `-DCMAKE_EXPORT_COMPILE_COMMANDS=ON`) or with a special tools (like `Bear`) and used by Clang tools (`Clang-Tidy`, `Clangd` among others).

But as far as I know there's no simple way to call Clang itself using data from Compilation Database, and still it's useful, especially if you are a LLVM developer:

+ Want to look at AST? You need to **find build command**, and run Clang with `-cc1 -ast-dump`. If you disregard compilation flags, you will get flooded by errors, get and incorrect or incomplete AST (since C++ isn't really context-free, and Clang's AST is a bit more than just AST).

+ Want to analyze singe file with CSA (Clang Static Analyzer)? **Find build command**, run Clang with `--analyze`.

+ Want to measure time spent on compilation of a single source of your project? Or compile it separately with all #includes still available? Than you need to **find build command**. 

Most of this things are possible with a `Clang Tool`, or partially solved for project (you can use scan-build to analyze whole projects, probably even incrementally or adjust build system configuration when
you want to test something in your file, create new project, ...)

But it's inconvenient. And this tool aims to address that.

For example, to get AST you can now do:
```sh
clang -Xclang -ast-dump $(find-cxx-flags my-file.cpp)
```

## Prerequisites

You need to have `LLVM` and `Clang` installed. You can install them with your distribution's package manager or build from [source](https://llvm.org/docs/CMake.html). Consult [LLVM documentation](https://llvm.org/docs/CMake.html) for more information.

Also, to build this project you will need `CMake` and `Ninja`.

## Building

You can build it like any other `CMake` project:
```sh
mkdir -p build
cd build

cmake .. -DCMAKE_BUILD_TYPE=Release -G Ninja
cmake --build .
```

Now you can copy `find-cxx-flags` or symlink it somewhere in your `$PATH`.

